\documentclass[dissertation.tex]{subfile}

\chapter{Background and related work}
\label{ch:bg}


\clar{What is relevant? Most capability/fat pointer literature discusses
C, where I'm very much focussed on a `safe' language.}

\wip{rephrase} This chapter provides an overview of capabilities, CHERI,
and safe languages with capabilities.
Rust is discussed in Chapter~\ref{ch:rust}.


\section{Capabilities}
A \emph{capability} is the address of an entity combined with the
permitted actions using that reference~\cite{Dennis:1966:PSM}.
An entity may traditionally be a memory segment, and actions could be to
write or execute that segment.
Throughout this work, a recurring theme will be the arbitrary
dereferencing of pointers, an action permitted in Unsafe Rust, but not
Safe Rust.

Capabilities have a long history: while the concept had been established
beforehand, they were implemented and expounded in
Multics~\cite{bell-lapadula}, and there is recurring interest in fat
pointers today~\cite{hardbound-devietti,lowfat-kwon}.
They can prevent common classes of attacks, such as the
eternal buffer overflow (1,613 published CVEs in 2018
alone~\cite{nist-nvd-overflow-2018}), and obviate other mitigations,
such as address-space layout randomisation and \(W \oplus X\) protection
against execution of data.


\section{CHERI: Capability Hardware Enhanced RISC Instructions}
CHERI extends a 64-bit RISC ISA to support capabilities.
Its design emphasises incremental adoption, and the principles of least
privilege and intentional use, to mitigate unintended vulnerabilities.
Its hybrid approach enables capability code to be used alongside
non-capability code, allowing a concentration on higher-risk code and
libraries~\cite{cheri-v6}.


\section{Survey of related work}
\label{sec:bg-related}

\wip{Overview}
Primarily examining safe languages and capabilities: there has been a
lot of work on C and capabilities.

CHERI in C.
Fat pointers/capabilities in C.
Capabilities on any other safe language?

\clar{How much subtlety is required in the following sections? At
present, none is attempted.}


\subsection{CHERI and the Java Native Interface}
\label{sec:bg-cheri-jni}

Capabilities are a viable alternative to sandboxing JNI
functions~\cite{cheri-jni}.
Chisnall et al.~proposes safe direct access to buffers owned by the JVM,
rather than copying, and without exposing the rest of the JVM's memory.
This preserves Java safety guarantees.
