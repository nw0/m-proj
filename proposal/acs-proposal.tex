\documentclass[11pt]{article}
\usepackage{a4wide,parskip,times}
\usepackage{microtype}

\begin{document}

\centerline{\Large Optimising Rust memory safety with CHERI capabilities}
\vspace{2em}
\centerline{\Large \emph{An MPhil project proposal}}
\vspace{2em}
\centerline{\large N. W. S. Sim (\emph{nwss2}), Wolfson College}
\vspace{1em}
\centerline{\large Project Supervisor: Prof Simon Moore}
\vspace{1em}

\begin{abstract}
\textsl{
Memory-safe languages such as Rust are a safer alternative to systems programming in C, as they prevent traditional paths to security exploits, such as buffer overflows and unauthorised reads.
However, runtime checks such as those on array overrun or invalid type/trait coercion to maintain safety incur performance penalties.
The CHERI architecture provides \emph{capabilities} in hardware, which eliminate the possibility of accessing or modifying unauthorised regions of memory while incurring minimal overheads.
We therefore propose to extend Rust to use capabilities, potentially providing stronger safety guarantees while reducing runtime overheads, where safety guarantees would have been absent before.
(98 words)} 
\end{abstract}

\section{Introduction, approach and outcomes (500 words)}

\textsl{Provide an introduction to your project or essay. In particular, try to
  motivate the work and explain the relevant context (general
  background, as well as sufficient detail about any related
  work).}

\textsl{What's the basic idea and approach? What are you thinking of 
doing, and how is it going to solve the problem (or need) you've 
identified. What are you going to ``produce''? 
A project will typically produce one (or perhaps more) of the following:
a piece of software, an evaluation of a published result, a proof, or
the design (and perhaps the construction of) a new piece of hardware. An
essay will typically either review and critique a particular area of the
academic literature, or evaluate a published result or proof. Try to 
name the specific things (and describe them) in this part of the 
proposal -- this will allow you to refer to them in the next.} 

Many security vulnerabilities are bugs arising from the lack of memory safety in C; a traditional exploit is the buffer overflow.
The C language specification includes a number of situations that lead to \emph{undefined behaviour}: akin to a deduction of `falsity' in logic, after these points the state of the program might be arbitrary.
Undefined behaviour allows compilers to assume that certain conditions never hold, enabling them to make powerful (but dangerous) optimisations.
As a result, crucial checks can be optimised away and invariants violated by compilers, resulting in executables vulnerable to memory attacks~\cite{simon2018wygiwyc}.
Many systems and compiler programmers frequently underestimate the pervasiveness of undefined behaviour in code that appear to function correctly, and gloss over the subtleties of the standard~\cite{memarian2016cdepths};
these represent future opportunities for vulnerabilities to arise when code is optimised away by compiler transformations~\cite{wang2013towards}.
(137 words)

The CHERI project provides capabilities...we can solve memory safety issues by using them. (How?)

Observe that Rust is memory-safe and designed for systems programming, but runtime checks can be slow.
Some checks are redundant due to capabilities.
I will remove them for optimisation.
This is `easy' due to object lifetimes and ownership being very explicit in Rust.

Intended contributions:
\begin{itemize}
  \item Functional Rust (cross-)compiler to CHERI which removes some redundant runtime checks (e.g. array bounds)
  \item A set of microbenchmarks (test cases) consisting of proof-of-concept exploits which are stopped by both capabilities and checks; these represent the redundant checks
  \item *non-contribution: exhaustive removal of redundant checks...might be acceptable to break some language features
  \item Performance evaluation on some relevant systems code (such as?)
\end{itemize}

\section{Workplan (426 words)}

\begin{description}
  \item [Dec 10--23] Initial project work: set up of environment, toolchain; finesse a working process for compiling Rust programs to CHERI.
  Survey of literature for capabilities and their implications on memory-safe languages with runtime checks and Rust specifically.
  \item [Dec 24--Jan 6] Devise tests and microbenchmarks as mentioned in intended contributions: proof-of-concept exploits that could be stopped by either capabilities or runtime checks; these represent the checks that may be optimised out.
  \item [Jan 7--Jan 20] Identify relevant checks (code in the Rust compiler) that may be modified, attempt to do so and consider if changes at other layers of the compiler need to be made; derive tests that need to be made to ensure that the compiler is still operable and that other runtime checks or security properties are not compromised: considerable familiarity with the Rust documentation desired before this point.
  \item [Jan 21--Feb 3] Continue modifying redundant checks for capabilities, continually testing that this works.
  Provide Rust code (as a demonstration) that the checks are not present in the LLVM intermediate representation, as required.
  Additional (fresh) review of related work.
  \item [Feb 4--17]  Finalise the modification of checks and functional testing.
  \item [Feb 18--Mar 3] Experimental performance testing: simple cases including simple array checks, library vector implementations to determine factors that affect performance.
  Consider and design experiments for the desired factors: decide how `performance' should be quantified and produce relevant test methodology.
  \item [Mar 4--17] Initial performance testing with straightforward but realistic and relevant systems programming applications.
  Refine test methodology as needed: the objective is to gather simple and relevant results but prepare the methodology for more detailed testing in the next stage.
  At this point, tests should be simple to re-run after tweaking methods.
  \item [Mar 18--31] More intricate performance testing: traits and generics, quicksort etc.
  These are particularly relevant for Rust to be useful as a general programming language on CHERI.
  \item [Apr 1--14] Examine implications of capability-aware \texttt{memcpy} and other instances of calling into C for CHERI-Rust.
  On other platforms, when Rust calls into C, the returned data is checked for safety: I want to consider if these checks can too be modified if they are made redundant by CHERI capabilities.
  \item [Apr 15--28] Examine results and performance visualisation; final literature review (to continue into dissertation writing).
  Consolidation of modifications made and relevant test cases, examples, or proofs.
  Determine if additional results are required or helpful, and perform them.
  \item [Apr 29--May 13] Dissertation writing: continuing review to ensure relevance, writing up of results, interpretation, and limitations.
  \item [May 13--26] Dissertation writing: reconsider context and motivation, contemplate future work.
  \item [May 27--Jun 9] Contingency.
\end{description}

\bibliography{../project}
\bibliographystyle{plain}

\newpage
\appendix

\end{document}
